<script>
  $(document).ready(function() {
    $navbar = $('#navbar')

    $navbar.on('click', '#signup-btn', function(e) {
      e.preventDefault()
      $('#signup-modal').modal('show')
    })

    $navbar.on('click', '#login-btn', function(e) {
      e.preventDefault()
      $('#login-modal').modal('show')
    })

    $navbar.on('click', '#logout-btn', function(e) {
      e.preventDefault()

      axios({
        method: 'DELETE',
        url: '/api/auth/logout',
        withCredentials: true
      }).then(function() {
        window.location.href = '/'
      })
    })
  })
</script>


<nav id="navbar" class="navbar navbar-expand-lg navbar-light bg-light py-0">
  <a class="navbar-brand ms-3 d-flex"  href="/">
    <% if (currentUser) { %>
    <img src="/assets/logo.png" alt="" id="navbar-logo" class="logo"></a>
    <% } else { %>
      <img src="/assets/logo.png" alt="" id="navbar-logo" class="logo"></a>
    <% } %>

  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ms-auto me-3 ">
      <li class="nav-item">
        <a class="nav-link" href="/burgers">BROWSE ALL BURGERS</a>
      </li>
      <% if (currentUser) { %>
        <li class="nav-item">
          <a class="nav-link" href="/my/burgers">MY BURGERS</a>
        </li>
        <li class="nav-item">
          <a id="logout-btn" class="nav-link">LOGOUT</a>
        </li>
      <% } else { %>
        <li class="nav-item">
          <a id="signup-btn" class="nav-link">REGISTER</a>
        </li>
        <li class="nav-item">
          <a id="login-btn" class="nav-link">LOGIN</a>
        </li>
      <% } %>
    </ul>
  </div>
</nav>

<%- include('./signup-modal') %>
<%- include('./login-modal') %>
