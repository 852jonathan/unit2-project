<%- contentFor('meta') %>
<%- contentFor('styles') %>
<%- contentFor('scripts') %>
<script>
  $(document).ready(function() {
    $homeRegister = $('#home-register')
    $loginModal = $('#login-modal')
    $signupForm = $('#signup-form')
    $homeRegisterForm = $('#home-register-form')



    $homeRegister.on('click', '#login-in-home', function(e) {
      e.preventDefault()
      $loginModal.modal('show')
    })

    $homeRegister.on('click', '#home-register-form-submit-btn', function(e) {
      e.preventDefault()
      const formData = new FormData($homeRegisterForm[0])

      axios({
        method: 'POST',
        url: '/api/auth/signup',
        data: formData,
        // withCredentials: true

      }).then(function() {
        window.location.href = '/my/burgers'

      }).catch(function(err) {
        switch (err.response.status) {
          case 406: {
            const { response: { data: { errors } }} = err

            $homeRegister.find('.invalid-feedback').empty()
            $homeRegister.find('.is-invalid').removeClass('is-invalid')

            errors.forEach(function(error) {
              const { param: fieldName, msg } = error
              const $input = $homeRegister.find(`[name="${fieldName}"]`)
              const $invalidFeedback = $input.siblings('.invalid-feedback')
              $input.addClass('is-invalid')
              $invalidFeedback.text(msg)

            })
            break
          }
          default: {
            console.log(err.response)
            break
          }
        }
      })
    })
  })
</script>

<%- contentFor('body') %>
<div class="container">
  <div class="row">
    <div class="col">
      <div class ="main-hero-text-wrapper col-md-8 ms-sm-5 mt-5">
        <h1 class="main-hero-text">Have Fun </h1>
        <h1>Creating Your Own Burgers and Rate Other Burgers!</h1>

      </div>
    </div>

    <div class="col col-md-2 col-sm-0 col-auto">
      <div class="col-3">
        <div class="logo-img-wrap col col-8">
          <img id="homepage-logo" src="/assets/logo.png" alt="" class="logo">
        </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-7">

      <div id="home-register" class="home-register-form-wrapper col-6 mx-auto mt-3">

        <form id="home-register-form">
          <div class="home-register-text mt-3">REGISTER NOW</div>

          <div class="mt-3 mb-3">
            <label for="home-register-form-email" class="form-label ms-5">EMAIL:</label>
            <input type="email" id="home-register-form-email"  class="form-control w-75 mx-auto" name="email">
            <div class="invalid-feedback ms-5"></div>

          </div>

          <div class="mt-3 mb-3">
            <label for="home-register-form-password" class="form-label ms-5">PASSWORD:</label>
            <input type="password" id="home-register-form-password" class="form-control w-75 mx-auto" name="password">
            <div class="invalid-feedback ms-5"></div>

          </div>

          <div class="text-center">
            <button type="submit" id="home-register-form-submit-btn" class="btn btn-warning mx-auto mb-1">REGISTER</button>
          </div>
          <div class="text-center">
            <button type="button" id="login-in-home" class="btn btn-link mt-0 mx-auto" data-target="#login-modal" data-toggle="modal">Already have an account? Login here!
            </button>
        </div>
        </form>
      </div>
    </div>
    <div class="col-3">
    <div class="hero-image-wrap col col-8">
      <img src="/assets/hero-image.png" alt="" class="hero-img">
    </div>
    </div>

  </div>
</div>
